<div class="card shadow-sm">
  <div class="container-fluid p-4 audit-log">

    <!-- Header -->
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h4 class="fw-semibold">Audit Log</h4>
    </div>

    <!-- Filter -->
    <div class="card shadow-sm mb-4">
      <div class="card-body">
        <div class="row g-3 align-items-center">

          <div class="col-md-3">
            <input type="text" class="form-control" placeholder="Search by User or Action" [(ngModel)]="searchText" />
          </div>

          <div class="col-md-3">
            <input type="date" class="form-control" [(ngModel)]="filterFromDate" placeholder="From Date" />
          </div>

          <div class="col-md-3">
            <input type="date" class="form-control" [(ngModel)]="filterToDate" placeholder="To Date" />
          </div>

          <div class="col-md-3 text-end">
            <button class="btn btn-outline-secondary me-2" (click)="resetFilters()">
              <i class="fa-solid fa-rotate-left me-1"></i> Reset Filters
            </button>
          </div>

        </div>
      </div>
    </div>

    <!-- Table -->
    <div class="card shadow-sm">
      <div class="card-body">

        <table class="table table-bordered table-hover align-middle">
          <thead class="table-light">
            <tr>
              <th style="width: 50px;">S.No</th>
              <th>User</th>
              <th>Action</th>
              <th>Module</th>
              <th>Date & Time</th>
              <th>IP Address</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let log of paginatedLogs(); let i = index">
              <td>{{ (currentPage - 1) * pageSize + i + 1 }}</td>
              <td>{{ log.User }}</td>
              <td>{{ log.Action }}</td>
              <td>{{ log.Module }}</td>
              <td>{{ log.DateTime | date:'yyyy-MM-dd HH:mm:ss' }}</td>
              <td>{{ log.IP }}</td>
            </tr>
            <tr *ngIf="filteredLogs().length === 0">
              <td colspan="6" class="text-center text-muted">No records found</td>
            </tr>
          </tbody>
        </table>

        <!-- Pagination -->
        <nav *ngIf="totalPages() > 1">
          <ul class="pagination justify-content-center mt-3">
            <li class="page-item" [class.disabled]="currentPage === 1">
              <a class="page-link" href="#" (click)="changePage(currentPage - 1)">Previous</a>
            </li>
            <li class="page-item"
                *ngFor="let page of pagesArray()"
                [class.active]="currentPage === page">
              <a class="page-link" href="#" (click)="changePage(page)">{{ page }}</a>
            </li>
            <li class="page-item" [class.disabled]="currentPage === totalPages()">
              <a class="page-link" href="#" (click)="changePage(currentPage + 1)">Next</a>
            </li>
          </ul>
        </nav>

      </div>
    </div>

  </div>
</div>
