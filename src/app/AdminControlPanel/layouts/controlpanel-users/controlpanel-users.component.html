<div class="users-wrapper">

  <!-- HEADER -->
  <div class="users-header">
    <h2>Users Management</h2>
    <button class="add-btn" (click)="openAddUser()">+ Add User</button>
  </div>

  <!-- TABLE -->
  <div class="table-card">
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Email</th>
          <th>Company</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let user of paginatedUsers">
          <td>
            <div class="user-info">
              <div class="avatar">
                {{ user.name.charAt(0) }}
              </div>
              <span>{{ user.name }}</span>
            </div>
          </td>

          <td>{{ user.email }}</td>

          <td>
            <span class="company-badge">
              {{ user.company }}
            </span>
          </td>

          <td>
            <span class="status-badge"
              [ngClass]="user.status === 'Active' ? 'active' : 'inactive'">
              {{ user.status }}
            </span>
          </td>

          <td class="actions">
            <span class="edit">âœï¸</span>
            <span class="delete">ğŸ—‘ï¸</span>
          </td>
        </tr>
      </tbody>
    </table>
    <div class="pagination">
  <button (click)="prevPage()" [disabled]="currentPage === 1">
    Prev
  </button>

  <span>
    Page {{ currentPage }} of {{ totalPages }}
  </span>

  <button (click)="nextPage()" [disabled]="currentPage === totalPages">
    Next
  </button>
</div>

  </div>

</div>


<!-- ================= MODAL ================= -->
<div class="modal-overlay" *ngIf="showAddForm">

  <div class="modal">

    <!-- HEADER -->
    <div class="modal-header">
      <h3>Add New User</h3>
      <button class="close-btn" (click)="closeForm()">âœ–</button>
    </div>

    <!-- BODY -->
    <div class="modal-body">

      <div class="form-grid">

        <input placeholder="Company ID" [(ngModel)]="newUser.CompanyID">
        <input placeholder="Region ID" [(ngModel)]="newUser.RegionID">

        <input placeholder="Employee Code" [(ngModel)]="newUser.EmployeeCode">
        <input placeholder="Full Name" [(ngModel)]="newUser.FullName">

        <input placeholder="Email" [(ngModel)]="newUser.Email">
        <input placeholder="Password Hash" [(ngModel)]="newUser.PasswordHash">

        <input placeholder="Role ID" [(ngModel)]="newUser.RoleId">

        <select [(ngModel)]="newUser.Status">
          <option value="Active">Active</option>
          <option value="Inactive">Inactive</option>
        </select>

        <input placeholder="Created By" [(ngModel)]="newUser.CreatedBy">
        <input type="datetime-local" [(ngModel)]="newUser.CreatedDate">

        <input placeholder="Modified By" [(ngModel)]="newUser.ModifiedBy">
        <input type="datetime-local" [(ngModel)]="newUser.ModifiedAt">

        <input type="datetime-local" [(ngModel)]="newUser.LastLogin">
        <input placeholder="Refresh Token" [(ngModel)]="newUser.RefreshToken">

        <input type="datetime-local" [(ngModel)]="newUser.RefreshTokenExpiry">
        <input placeholder="Reporting To" [(ngModel)]="newUser.reportingTo">

        <input placeholder="Department ID" [(ngModel)]="newUser.departmentId">
        <input placeholder="Company Name" [(ngModel)]="newUser.company_name">

        <input placeholder="Type" [(ngModel)]="newUser.type">
        <input placeholder="Phone Number" [(ngModel)]="newUser.phone_number">

        <input placeholder="Module" [(ngModel)]="newUser.module">

        <input placeholder="User Company ID" [(ngModel)]="newUser.userCompanyId">
        <input placeholder="Designation" [(ngModel)]="newUser.Designation">

      </div>

      <!-- FOOTER -->
      <div class="modal-footer">
        <button class="cancel-btn" (click)="closeForm()">Cancel</button>
        <button class="save-btn" (click)="saveUser()">Save User</button>
      </div>

    </div>

  </div>

</div>
