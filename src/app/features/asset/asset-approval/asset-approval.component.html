<form class="row mb-3" [formGroup]="filtersForm" (ngSubmit)="applyFilters()">

  <div class="col-md-3">
    <label class="form-label">Asset Name</label>
    <input
      type="text"
      class="form-control"
      formControlName="assetName"
      placeholder="Enter asset name">
  </div>

  <div class="col-md-3">
    <label class="form-label">Location</label>
    <input
      type="text"
      class="form-control"
      formControlName="location"
      placeholder="Enter location">
  </div>

  <div class="col-md-2">
    <label class="form-label">Status</label>
    <select class="form-select" formControlName="assetStatusId">
      <option value="">All</option>
      <option *ngFor="let s of statuses" [value]="s.assetStatusId">
        {{ s.assetStatusName }}
      </option>
    </select>
  </div>

  <div class="col-md-2">
    <label class="form-label">Currency</label>
    <select class="form-select" formControlName="currencyCode">
      <option value="">All</option>
      <option *ngFor="let c of currencies" [value]="c">
        {{ c | uppercase }}
      </option>
    </select>
  </div>

  <div class="col-md-2 d-flex align-items-end">
    <button class="btn btn-primary w-100" type="submit">
      Filter
    </button>
  </div>

</form>

<!-- ======================================================= -->
<!-- TABLE -->
<!-- ======================================================= -->
<div class="dashboard-tables full-row mt-2">
  <div class="table-card">
    <h3>Asset Approvals</h3>

    <table class="table table-bordered table-hover">
      <thead>
        <tr>
          <th>
            <input type="checkbox" (change)="toggleAll($event)">
          </th>
          <th (click)="sortBy('assetName')" class="cursor-pointer">
            Asset Name
          </th>
          <th (click)="sortBy('assetCode')" class="cursor-pointer">
            Asset Code
          </th>
          <th (click)="sortBy('assetLocation')" class="cursor-pointer">
            Location
          </th>
          <th (click)="sortBy('assetCost')" class="cursor-pointer">
            Cost
          </th>
          <th>Status</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let asset of pagedAssets">
          <td>
            <input
              type="checkbox"
              [(ngModel)]="asset.checked"
              [disabled]="asset.approvalStatus !== 'Pending'"
            />
          </td>

          <td>{{ asset.assetName }}</td>
          <td>{{ asset.assetCode }}</td>
          <td>{{ asset.assetLocation }}</td>
          <td>{{ asset.currencyCode }} {{ asset.assetCost }}</td>

          <td>
            <span
              class="badge"
              [ngClass]="{
                'bg-warning': asset.approvalStatus === 'Pending',
                'bg-success': asset.approvalStatus === 'Approve',
                'bg-danger': asset.approvalStatus === 'Reject'
              }">
              {{ asset.approvalStatus }}
            </span>
          </td>
        </tr>

        <tr *ngIf="noVisibleAssets">
          <td colspan="6" class="text-center text-muted">
            No records found
          </td>
        </tr>
      </tbody>
    </table>

    <!-- ======================================================= -->
    <!-- ACTION BUTTONS -->
    <!-- ======================================================= -->
    <div class="mt-2">
      <button
        class="btn btn-success btn-sm me-2"
        (click)="approveRejectAssets('Approve')">
        Approve Selected
      </button>

      <button
        class="btn btn-danger btn-sm"
        (click)="approveRejectAssets('Reject')">
        Reject Selected
      </button>
    </div>

    <!-- ======================================================= -->
    <!-- PAGINATION -->
    <!-- ======================================================= -->
   <!-- ================= PAGINATION ================= -->
<div class="d-flex justify-content-between align-items-center mt-3">

  <!-- PAGE SIZE -->
  <div>
    <label>
      Show
      <select
        class="form-select d-inline w-auto ms-2"
        [(ngModel)]="pageSize"
        (ngModelChange)="changePageSize($event)">
        <option *ngFor="let size of pageSizeOptions" [value]="size">
          {{ size }}
        </option>
      </select>
      entries
    </label>
  </div>

  <!-- PAGE NAVIGATION -->
  <div class="d-flex align-items-center">
    <button
      class="btn btn-outline-secondary btn-sm me-2"
      (click)="changePage(currentPage - 1)"
      [disabled]="currentPage === 1">
      Previous
    </button>

    <span class="mx-2">
      Page {{ currentPage }} of {{ totalPages }}
    </span>

    <button
      class="btn btn-outline-secondary btn-sm ms-2"
      (click)="changePage(currentPage + 1)"
      [disabled]="currentPage === totalPages">
      Next
    </button>
  </div>

</div>

  </div>
</div>