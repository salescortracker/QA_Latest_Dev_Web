<div class="dashboard-tables full-row mt-2">
  <div class="table-card">
    <h3>Timesheet Approvals</h3>

    <div class="table-responsive">
      <table class="table table-bordered align-middle table-hover">
        <thead class="table-dark">
          <tr>
            <th>
              <input type="checkbox"
                     [(ngModel)]="selectAll"
                     (change)="toggleSelectAll()" />
            </th>
            <th (click)="sortBy('employeeName')" style="cursor:pointer">
              Employee Name
              <span *ngIf="sortColumn==='employeeName'">{{ sortDirection==='asc'?'▲':'▼' }}</span>
            </th>
            <th (click)="sortBy('employeeCode')" style="cursor:pointer">
              Employee ID
              <span *ngIf="sortColumn==='employeeCode'">{{ sortDirection==='asc'?'▲':'▼' }}</span>
            </th>
            <th (click)="sortBy('timesheetDate')" style="cursor:pointer">
              Date
              <span *ngIf="sortColumn==='timesheetDate'">{{ sortDirection==='asc'?'▲':'▼' }}</span>
            </th>
            <th (click)="sortBy('totalHoursText')" style="cursor:pointer">
              Total Hours
              <span *ngIf="sortColumn==='totalHoursText'">{{ sortDirection==='asc'?'▲':'▼' }}</span>
            </th>
            <th (click)="sortBy('otHoursText')" style="cursor:pointer">
              OT Hours
              <span *ngIf="sortColumn==='otHoursText'">{{ sortDirection==='asc'?'▲':'▼' }}</span>
            </th>
            <th>Approver Comments</th>
            <th>Status</th>
            <th>Action</th>
          </tr>
        </thead>

        <tbody>
          <tr *ngFor="let ts of filteredTimesheets()">
            <td>
              <input *ngIf="ts.status === 'Submitted'"
                     type="checkbox"
                     [(ngModel)]="ts.selected"
                     (change)="checkSelectAll()" />
            </td>
            <td>{{ ts.employeeName }}</td>
            <td>{{ ts.employeeCode }}</td>
            <td>{{ ts.timesheetDate | date:'dd-MMM-yyyy' }}</td>
            <td>{{ ts.totalHoursText }}</td>
            <td>{{ ts.otHoursText }}</td>
            <td>
              <textarea class="form-control"
                        rows="1"
                        [(ngModel)]="ts.comments"
                        [disabled]="ts.status === 'Approved' || ts.status === 'Rejected'"
                        placeholder="Enter comments"></textarea>
            </td>
            <td>
              <span class="badge"
                    [ngClass]="{
                      'bg-warning text-dark': ts.status === 'Pending',
                      'bg-primary': ts.status === 'Submitted',
                      'bg-success': ts.status === 'Approved',
                      'bg-danger': ts.status === 'Rejected'
                    }">
                {{ ts.status }}
              </span>
            </td>
            <td class="text-center">
              <a href="javascript:void(0)"
                 (click)="openViewModal(ts)"
                 data-bs-toggle="modal"
                 data-bs-target="#viewTimesheetModal">
                <i class="fa-solid fa-eye text-primary fs-5"></i>
              </a>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

   

    <div class="mt-3 text-end">
      <button class="btn btn-success me-2" (click)="approveSelected()">Approve Selected</button>
      <button class="btn btn-danger" (click)="rejectSelected()">Reject Selected</button>
    </div>

     <!-- Pagination -->
    <div class="d-flex justify-content-between align-items-center mt-2">
      <div>
        <label>Show:
          <select class="form-select d-inline w-auto ms-2"
                  [(ngModel)]="pageSize"
                  (change)="changePageSize(pageSize)">
            <option *ngFor="let size of pageSizeOptions" [ngValue]="size">{{ size }}</option>
          </select> entries
        </label>
      </div>

      <div>
        <button class="btn btn-outline-secondary btn-sm me-2"
                (click)="changePage(currentPage-1)"
                [disabled]="currentPage===1">Previous</button>
        <span>Page {{ currentPage }} of {{ totalPages }}</span>
        <button class="btn btn-outline-secondary btn-sm ms-2"
                (click)="changePage(currentPage+1)"
                [disabled]="currentPage===totalPages">Next</button>
      </div>
    </div>
  </div>
</div>